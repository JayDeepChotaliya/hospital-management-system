<section class="page">
  <h2>Add Patient</h2>

  <form [formGroup]="form" (ngSubmit)="submit()" novalidate>
    <!-- Name -->
    <div class="form-group">
      <label>Name *</label>
      <input type="text" formControlName="name" />
      <div class="error" *ngIf="form.get('name')?.touched && form.get('name')?.invalid">
        Name is required
      </div>
    </div>

    <!-- Date of Birth -->
    <div class="form-group">
      <label>Date of Birth *</label>
      <input type="date" formControlName="dob" />
      <div class="error" *ngIf="form.get('dob')?.touched && form.get('dob')?.invalid">
        Date of birth is required
      </div>
    </div>

    <!-- Gender -->
    <div class="form-group">
      <label>Gender *</label>
      <select formControlName="gender">
        <option value="">-- Select --</option>
        <option value="MALE">Male</option>
        <option value="FEMALE">Female</option>
        <option value="OTHER">Other</option>
      </select>
      <div class="error" *ngIf="form.get('gender')?.touched && form.get('gender')?.invalid">
        Gender is required
      </div>
    </div>

    <!-- Phone -->
    <div class="form-group">
      <label>Phone *</label>
      <input type="text" formControlName="phone" maxlength="10" />
      <div class="error" *ngIf="form.get('phone')?.touched && form.get('phone')?.invalid">
        Phone number must be 10 digits
      </div>
    </div>

    <!-- Address -->
    <div class="form-group">
      <label>Address *</label>
      <input type="text" formControlName="address" />
      <div class="error" *ngIf="form.get('address')?.touched && form.get('address')?.invalid">
        Address is required
      </div>
    </div>

    <!-- Medical History -->
    <div class="form-group">
      <label>Medical History</label>
      <textarea formControlName="medicalHistory"></textarea>
    </div>

    <!-- Disease -->
    <div class="form-group">
      <label>Disease</label>
      <input type="text" formControlName="disease" />
    </div>

    <!-- Admitted Date -->
    <div class="form-group">
      <label>Admitted Date *</label>
      <input type="date" formControlName="admittedDate" />
      <div
        class="error"
        *ngIf="form.get('admittedDate')?.touched && form.get('admittedDate')?.invalid"
      >
        Admitted date is required
      </div>
    </div>

    <!-- Backend Error -->
    <div class="error" *ngIf="error">
      {{ error }}
    </div>

    <!-- Actions -->
    <div class="actions">
      <button type="submit" [disabled]="form.invalid || loading">
        {{ loading ? 'Saving...' : 'Create Patient' }}
      </button>

      <button type="button" class="secondary" routerLink="/app/patients">Cancel</button>
    </div>
  </form>
</section>
